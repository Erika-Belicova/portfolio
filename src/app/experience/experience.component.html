<!-- experience section -->
<div class="relative max-w-6xl mx-auto mt-12 px-4 pb-10 overflow-x-hidden">
  <h3 class="text-4xl font-bold text-gray-100 text-center mb-4">Work Experience</h3>
  <div class="relative max-w-6xl mx-auto mt-8 px-4">

    <div class="text-center">
      <button (click)="toggleAll()"
        class="text-blue-300 border-2 border-blue-300 border-opacity-50 relative z-30 py-3 px-6 mb-4 text-lg font-semibold hover:bg-blue-400 hover:bg-opacity-10">
        {{ allExpanded ? 'Collapse All' : 'Expand All' }}
      </button>
    </div>

    <!-- scroll arrow -->
    <button (click)="scrollToTimeline()"
      class="mx-auto w-11 h-11 mt-2 cursor-pointer text-blue-300 animate-bounce hover:text-blue-400 flex items-center justify-center"
      aria-label="Scroll down" title="Scroll down to work experience timeline">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
        stroke-linecap="round" stroke-linejoin="round" class="w-11 h-11">
        <polyline points="6 9 12 15 18 9" />
      </svg>
    </button>

    <!-- timeline layout -->
    <div class="relative max-w-6xl mx-auto mt-8 px-4">
      <!-- timeline center line -->
      <div class="absolute top-[0rem] left-1/2 w-0.5 bg-gray-400 shadow-xl h-full transform -translate-x-1/2">
        <!-- absolute top-[-2rem] to move the timeline lower -->
      </div>

      <!-- timeline items -->
      <div class="space-y-10 md:space-y-0">

        <!-- job 1 -->
        <div class="relative flex items-start">
          <div class="w-full md:w-1/2 pr-8 text-left hidden md:block">
            <div data-aos="fade-right"
              class="relative inline-block border border-white/20 bg-slate-800 p-6 rounded-lg shadow-lg text-white w-full max-w-md transition-transform hover:-translate-y-1 hover:shadow-xl">

              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 0 }"></ng-container>

              <h4 class="text-lg font-semibold text-blue-300">Frontend Developer – Company</h4>
              <p class="text-m text-gray-400">Jan 2020 – Present</p>
              <ul *ngIf="showDetails[0]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!--<p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p>-->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- timeline dot -->
          <div
            class="absolute top-[-0.5rem] left-1/2 transform -translate-x-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-[0_4px_12px_rgba(0,0,0,0.20)] flex items-center justify-center z-10">
          </div>

          <!-- mobile card -->
          <div class="w-full md:hidden pl-8">
            <div
              class="relative bg-slate-800 border border-white/20 p-6 rounded-lg shadow-lg text-white w-full max-w-md transition-transform hover:-translate-y-1 hover:shadow-xl"
              data-aos="fade-left">

              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 0 }"></ng-container>

              <h4 class="text-lg font-semibold text-blue-300">Frontend Developer – Company</h4>
              <p class="text-m text-gray-400">Jan 2020 – Present</p>
              <ul *ngIf="showDetails[0]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!-- <p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p> -->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- job 2 -->
        <div class="relative flex items-start">
          <div class="w-full md:w-1/2 hidden md:block">
          </div>

          <!-- timeline dot -->
          <div
            class="absolute top-[-0.5rem] left-1/2 transform -translate-x-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-[0_4px_12px_rgba(0,0,0,0.20)] flex items-center justify-center z-10">
          </div>
          <div class="w-full md:w-1/2 pl-8">
            <div data-aos="fade-left"
              class="timeline-container relative bg-slate-800 border border-white/20 p-6 rounded-lg shadow-lg text-white w-full max-w-md transition-transform hover:-translate-y-1 hover:shadow-xl">

              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 1 }"></ng-container>

              <h4 class="text-lg font-semibold text-blue-300">Web Developer – Company</h4>
              <p class="text-m text-gray-400">Aug 2018 – Dec 2019</p>
              <ul *ngIf="showDetails[1]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!-- <p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p> -->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>


              <!-- second job on card 2 -->
              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 1 }"></ng-container>

              <h4 class="text-lg font-semibold mt-4 text-blue-300">Web Developer – Company</h4>
              <p class="text-m text-gray-400">Aug 2018 – Dec 2019</p>
              <ul *ngIf="showDetails[1]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!-- <p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p> -->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>
            </div>
          </div>

        </div>

        <!-- job 3 -->
        <div class="relative flex items-start">
          <div class="w-full md:w-1/2 pr-8 text-left hidden md:block">
            <div data-aos="fade-right"
              class="relative inline-block border border-white/20 bg-slate-800 p-6 rounded-lg shadow-lg text-white w-full max-w-md transition-transform hover:-translate-y-1 hover:shadow-xl">

              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 2 }"></ng-container>

              <h4 class="text-lg font-semibold text-blue-300">Software Engineer – Company</h4>
              <p class="text-m text-gray-400">Jan 2017 – Aug 2018</p>

              <ul *ngIf="showDetails[2]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!-- <p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p> -->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- timeline dot -->
          <div
            class="absolute top-[-0.5rem] left-1/2 transform -translate-x-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-[0_4px_12px_rgba(0,0,0,0.20)] flex items-center justify-center z-10">
          </div>

          <!-- mobile card -->
          <div class="w-full md:hidden pl-8">
            <div
              class="relative bg-slate-800 border border-white/20 p-6 rounded-lg shadow-lg text-white w-full max-w-md transition-transform hover:-translate-y-1 hover:shadow-xl"
              data-aos="fade-left">

              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 2 }"></ng-container>

              <h4 class="text-lg font-semibold text-blue-300">Software Engineer – Company</h4>
              <p class="text-m text-gray-400">Jan 2017 – Aug 2018</p>
              <ul *ngIf="showDetails[2]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!-- <p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p> -->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>
            </div>
          </div>

        </div>

        <!-- job 4 -->
        <div class="relative flex items-start">
          <div class="w-full md:w-1/2 hidden md:block">
          </div>

          <!-- timeline dot -->
          <div
            class="absolute top-[-0.5rem] left-1/2 transform -translate-x-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-[0_4px_12px_rgba(0,0,0,0.20)]  flex items-center justify-center z-10">
          </div>
          <div class="w-full md:w-1/2 pl-8">
            <div data-aos="fade-left" id="timeline"
              class="relative bg-slate-800 border border-white/20 p-6 rounded-lg shadow-lg text-white w-full max-w-md transition-transform hover:-translate-y-1 hover:shadow-xl">

              <!-- toggle button -->
              <ng-container *ngTemplateOutlet="toggleButton; context: { index: 3 }"></ng-container>

              <h4 class="text-lg font-semibold text-blue-300">Intern Developer – Company</h4>
              <p class="text-m text-gray-400">Jun 2016 – Dec 2016</p>
              <ul *ngIf="showDetails[3]" class="p-4 list-disc list-outside text-gray-300 space-y-1">
                <li>Built and maintained Angular apps</li>
                <li>Collaborated closely with UX/UI team</li>
                <li>Focused on responsive and accessible design</li>
              </ul>

              <!-- always visible tech stack -->
              <!-- <p class="mt-2 text-gray-400">JavaScript • HTML • CSS • Angular • TypeScript • SQL</p> -->
              <div class="space-y-2">
                <ul class="flex flex-wrap gap-3 pt-4">
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Java</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Spring Boot</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">Angular</li>
                  <li class="bg-[#3B4F6E] rounded-full px-4 py-1 text-gray-100 text-sm">TypeScript</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>
</div>

<ng-template #toggleButton let-index="index">
  <button (click)="toggleDetails(index)"
    class="absolute top-3 right-3 text-blue-300 border-2 border-blue-300 border-opacity-50 w-11 h-11 rounded-full flex items-center justify-center hover:bg-blue-400 hover:bg-opacity-10 focus:outline-none transition"
    [attr.aria-label]="showDetails[index] ? 'Hide details' : 'Show details'"
    [title]="showDetails[index] ? 'Hide details' : 'Show details'">
    <svg *ngIf="!showDetails[index]" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
      stroke="currentColor" stroke-width="3">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <svg *ngIf="showDetails[index]" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
      stroke="currentColor" stroke-width="3">
      <path stroke-linecap="round" stroke-linejoin="round" d="M20 12H4" />
    </svg>
  </button>
</ng-template>